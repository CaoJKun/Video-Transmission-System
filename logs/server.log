2025-08-12 14:55:18,911 - tools.video_manager - INFO - ä¼šè¯æ¸…ç†ç®¡ç†å™¨å¯åŠ¨: æ¸…ç†é—´éš” 1h, ä¼šè¯TTL 24h
2025-08-12 14:55:18,911 - __main__ - INFO - å°è¯•åŠ è½½æ¨¡å‹: openai/whisper-base
2025-08-12 14:55:18,911 - __main__ - INFO - Starting Video Tools MCP Server on 0.0.0.0:8000
2025-08-12 14:55:18,911 - __main__ - INFO - Available tools:
2025-08-12 14:55:18,911 - __main__ - INFO - - upload_video: ä¸Šä¼ è§†é¢‘æ–‡ä»¶å¹¶åˆ›å»ºä¼šè¯
2025-08-12 14:55:18,911 - __main__ - INFO - - video2pictures: å°†è§†é¢‘è½¬æ¢ä¸ºå›¾ç‰‡å¸§
2025-08-12 14:55:18,911 - __main__ - INFO - - picturepicker: ä»å¸§ä¸­é€‰æ‹©å…³é”®å¸§
2025-08-12 14:55:18,911 - __main__ - INFO - - video2audio: å°†è§†é¢‘è½¬æ¢ä¸ºéŸ³é¢‘
2025-08-12 14:55:18,911 - __main__ - INFO - - audio2text: å°†éŸ³é¢‘è½¬æ¢ä¸ºæ–‡å­—
2025-08-12 14:55:18,911 - __main__ - INFO - - video2metadata: è·å–è§†é¢‘å…ƒæ•°æ®
2025-08-12 14:55:18,911 - __main__ - INFO - - video2motionTokens: ç”Ÿæˆè¿åŠ¨ä»¤ç‰Œ
2025-08-12 14:55:18,911 - __main__ - INFO - - get_session_info: è·å–ä¼šè¯ä¿¡æ¯å’ŒçŠ¶æ€
2025-08-12 14:55:18,911 - __main__ - INFO - - cleanup_session: æ‰‹åŠ¨æ¸…ç†ä¼šè¯
2025-08-12 14:55:18,911 - __main__ - INFO - - get_system_stats: è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
2025-08-12 14:55:18,958 - __main__ - INFO - FFmpegçŠ¶æ€: å¯ç”¨
2025-08-12 14:55:18,958 - __main__ - INFO - å·¥ä½œç›®å½•: /Users/bytedance/video-mcp-server/video_processing_data


â•­â”€ FastMCP 2.0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                            â”‚
â”‚        _ __ ___ ______           __  __  _____________    ____    ____     â”‚
â”‚       _ __ ___ / ____/___ ______/ /_/  |/  / ____/ __ \  |___ \  / __ \    â”‚
â”‚      _ __ ___ / /_  / __ `/ ___/ __/ /|_/ / /   / /_/ /  ___/ / / / / /    â”‚
â”‚     _ __ ___ / __/ / /_/ (__  ) /_/ /  / / /___/ ____/  /  __/_/ /_/ /     â”‚
â”‚    _ __ ___ /_/    \__,_/____/\__/_/  /_/\____/_/      /_____(_)____/      â”‚
â”‚                                                                            â”‚
â”‚                                                                            â”‚
â”‚                                                                            â”‚
â”‚    ğŸ–¥ï¸  Server name:     video-tools                                         â”‚
â”‚    ğŸ“¦ Transport:       Streamable-HTTP                                     â”‚
â”‚    ğŸ”— Server URL:      http://0.0.0.0:8000/mcp/                            â”‚
â”‚                                                                            â”‚
â”‚    ğŸ“š Docs:            https://gofastmcp.com                               â”‚
â”‚    ğŸš€ Deploy:          https://fastmcp.cloud                               â”‚
â”‚                                                                            â”‚
â”‚    ğŸï¸  FastMCP version: 2.11.1                                              â”‚
â”‚    ğŸ¤ MCP version:     1.12.3                                              â”‚
â”‚                                                                            â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯


[08/12/25 14:55:18] INFO     Starting MCP server 'video-tools'    server.py:1519
                             with transport 'streamable-http' on                
                             http://0.0.0.0:8000/mcp/                           
/Users/bytedance/video-mcp-server/venv/lib/python3.13/site-packages/websockets/legacy/__init__.py:6: DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions
  warnings.warn(  # deprecated in 14.0 - 2024-11-09
/Users/bytedance/video-mcp-server/venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py:17: DeprecationWarning: websockets.server.WebSocketServerProtocol is deprecated
  from websockets.server import WebSocketServerProtocol
INFO:     Started server process [98538]
INFO:     Waiting for application startup.
2025-08-12 14:55:19,084 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager started
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
Device set to use cpu
2025-08-12 14:55:20,683 - __main__ - INFO - Whisper æ¨¡å‹åŠ è½½æˆåŠŸ: openai/whisper-base
2025-08-12 14:55:34,323 - mcp.server.streamable_http_manager - INFO - Created new transport with session ID: 52e03861fd3b417a9536a26a8e908744
INFO:     127.0.0.1:58566 - "POST /mcp/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58569 - "POST /mcp/ HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:58570 - "GET /mcp/ HTTP/1.1" 200 OK
INFO:     127.0.0.1:58572 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:34,329 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
INFO:     127.0.0.1:58574 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:34,332 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
INFO:     127.0.0.1:58579 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:35,652 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:35,656 - tools.video_manager - INFO - åˆ›å»ºæ–°ä¼šè¯: 3a504d41-54b3-4c53-b6e4-0d3f71578996, æ–‡ä»¶: test_video_a2t.mp4, å·¥ä½œç›®å½•: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996
2025-08-12 14:55:35,656 - tools.upload_video - INFO - è§†é¢‘ä¸Šä¼ æˆåŠŸ: test_video_a2t.mp4 (0.46 MB)
2025-08-12 14:55:35,656 - tools.upload_video - INFO - åˆ›å»ºä¼šè¯: 3a504d41-54b3-4c53-b6e4-0d3f71578996
2025-08-12 14:55:35,656 - tools.upload_video - INFO - å·¥ä½œç›®å½•: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996
INFO:     127.0.0.1:58581 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:35,660 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:35,668 - tools.video2pictures - INFO - å¼€å§‹æå–è§†é¢‘å¸§: æ€»å¸§æ•° 465, é—´éš” 1, ç›®æ ‡ 1000 å¸§
2025-08-12 14:55:36,604 - tools.video2pictures - INFO - å¸§æå–å®Œæˆ: 465 å¸§
2025-08-12 14:55:36,604 - tools.video2pictures - INFO - æ­£åœ¨ç¼–ç å¸§æ•°æ®...
2025-08-12 14:55:36,667 - tools.video_manager - INFO - å¤„ç†æ•°æ®å·²ä¿å­˜: 3a504d41-54b3-4c53-b6e4-0d3f71578996 -> frames
2025-08-12 14:55:36,667 - tools.video2pictures - INFO - å¸§æ•°æ®å·²ä¿å­˜åˆ°ä¼šè¯ç›®å½•: 3a504d41-54b3-4c53-b6e4-0d3f71578996
INFO:     127.0.0.1:58587 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:37,021 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:37,024 - tools.picturepicker - INFO - å…³é”®å¸§é€‰æ‹©å®Œæˆ: 16 å¼ 
2025-08-12 14:55:37,027 - tools.video_manager - INFO - å¤„ç†æ•°æ®å·²ä¿å­˜: 3a504d41-54b3-4c53-b6e4-0d3f71578996 -> keyframes
2025-08-12 14:55:37,027 - tools.picturepicker - INFO - å…³é”®å¸§å·²ä¿å­˜åˆ°æœåŠ¡å™¨: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/keyframes
INFO:     127.0.0.1:58589 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:37,042 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:37,092 - tools.video2audio - INFO - å¼€å§‹éŸ³é¢‘æå–: wav æ ¼å¼
2025-08-12 14:55:37,165 - tools.video2audio - INFO - éŸ³é¢‘æå–å®Œæˆ: 0.47 MB
2025-08-12 14:55:37,166 - tools.video_manager - INFO - å¤„ç†æ•°æ®å·²ä¿å­˜: 3a504d41-54b3-4c53-b6e4-0d3f71578996 -> audio
2025-08-12 14:55:37,166 - tools.video2audio - INFO - éŸ³é¢‘å·²ä¿å­˜åˆ°æœåŠ¡å™¨: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/audio/audio.wav
INFO:     127.0.0.1:58591 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:37,179 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:37,180 - tools.audio2text - INFO - å¼€å§‹éŸ³é¢‘è½¬å½•: audio.wav (0.47 MB)
2025-08-12 14:55:37,180 - tools.audio2text - INFO - æ­£åœ¨è¿›è¡Œè¯­éŸ³è¯†åˆ«...
`return_token_timestamps` is deprecated for WhisperFeatureExtractor and will be removed in Transformers v5. Use `return_attention_mask` instead, as the number of frames can be inferred from it.
Using custom `forced_decoder_ids` from the (generation) config. This is deprecated in favor of the `task` and `language` flags/config options.
Transcription using a multilingual Whisper will default to language detection followed by transcription instead of translation to English. This might be a breaking change for your use case. If you want to instead always translate your audio to English, make sure to pass `language='en'`. See https://github.com/huggingface/transformers/pull/28687 for more details.
2025-08-12 14:55:38,876 - tools.audio2text - INFO - è½¬å½•å®Œæˆ: 56 å­—ç¬¦
2025-08-12 14:55:38,876 - tools.video_manager - INFO - è½¬å½•æ–‡æœ¬å·²ä¿å­˜: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/transcript.txt
2025-08-12 14:55:38,876 - tools.video_manager - INFO - å¤„ç†æ•°æ®å·²ä¿å­˜: 3a504d41-54b3-4c53-b6e4-0d3f71578996 -> transcript
2025-08-12 14:55:38,877 - tools.audio2text - INFO - è½¬å½•æ–‡æœ¬å·²ä¿å­˜: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/transcript.txt
INFO:     127.0.0.1:58599 - "POST /mcp/ HTTP/1.1" 200 OK
2025-08-12 14:55:38,881 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-08-12 14:55:38,884 - tools.video2metadata - INFO - å…ƒæ•°æ®æå–å®Œæˆ: 576x1024, 00:00:15
2025-08-12 14:55:38,884 - tools.video_manager - INFO - å…ƒæ•°æ®å·²ä¿å­˜: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/metadata.json
2025-08-12 14:55:38,885 - tools.video_manager - INFO - å¤„ç†æ•°æ®å·²ä¿å­˜: 3a504d41-54b3-4c53-b6e4-0d3f71578996 -> metadata
2025-08-12 14:55:38,885 - tools.video2metadata - INFO - å…ƒæ•°æ®å·²ä¿å­˜åˆ°æœåŠ¡å™¨: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996/metadata.json
2025-08-12 14:55:38,888 - mcp.server.streamable_http - INFO - Terminating session: 52e03861fd3b417a9536a26a8e908744
INFO:     127.0.0.1:58601 - "DELETE /mcp/ HTTP/1.1" 200 OK
INFO:     Shutting down
ERROR:    Cancel 0 running task(s), timeout graceful shutdown exceeded
INFO:     Waiting for application shutdown.
2025-08-12 14:57:02,299 - mcp.server.streamable_http_manager - INFO - StreamableHTTP session manager shutting down
INFO:     Application shutdown complete.
INFO:     Finished server process [98538]
2025-08-12 14:57:02,299 - __main__ - INFO - 
æ”¶åˆ°å…³é—­ä¿¡å·, æ­£åœ¨æ¸…ç†...
2025-08-12 14:57:02,299 - tools.video_manager - INFO - ä¼šè¯æ¸…ç†ç®¡ç†å™¨å·²åœæ­¢
2025-08-12 14:57:02,348 - tools.video_manager - INFO - åˆ é™¤ä¼šè¯ç›®å½•: /Users/bytedance/video-mcp-server/video_processing_data/3a504d41-54b3-4c53-b6e4-0d3f71578996
2025-08-12 14:57:02,348 - tools.video_manager - INFO - æ¸…ç†ä¼šè¯å®Œæˆ: 3a504d41-54b3-4c53-b6e4-0d3f71578996
2025-08-12 14:57:02,350 - __main__ - INFO - æ¸…ç†å®Œæˆ, é€€å‡ºç¨‹åº
